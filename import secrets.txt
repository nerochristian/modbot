import secrets
import requests
import time

CHECK_URL = "https://your-server.example.com/check_key"  # your endpoint
OUT_FILE = "valid_keys.txt"

def gen_key():
    # 16 bytes = 32 hex chars
    return secrets.token_hex(16)

def check_key(key: str) -> bool:
    # customize params/headers to match your own endpoint
    try:
        resp = requests.post(
            CHECK_URL,
            data={"key": key},
            timeout=5
        )
    except requests.RequestException:
        return False

    # Change this logic to however your server says “valid”
    # e.g. JSON: {"valid": true} or text contains "Valid key"
    if resp.status_code == 200 and "VALID" in resp.text.upper():
        return True
    return False

def main():
    while True:
        key = gen_key()
        print(f"Testing key: {key}")

        if check_key(key):
            print(f"[HIT] Valid key found: {key}")
            with open(OUT_FILE, "a", encoding="utf-8") as f:
                f.write(key + "\n")

        # Be nice to servers / rate limits
        time.sleep(0.2)

if __name__ == "__main__":
    main()
